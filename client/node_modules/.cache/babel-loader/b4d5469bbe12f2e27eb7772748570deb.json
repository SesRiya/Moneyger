{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport baseURL from \"../../../utils/baseURL\"; //Login actions\n\nexport const loginUserAction = createAsyncThunk(\"user/login\", async (payload, _ref) => {\n  let {\n    rejectWithValue,\n    getState,\n    dispatch\n  } = _ref;\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  };\n\n  try {\n    //htttp address\n    const {\n      data\n    } = await axios.post(`${baseURL}/users/login`, payload, config); // save user into localstorage when logged in\n\n    localStorage.setItem(\"userInfo\", JSON.stringify(data));\n    return data;\n  } catch (error) {\n    var _error$response;\n\n    if (!(error !== null && error !== void 0 && error.response)) {\n      throw error;\n    }\n\n    return rejectWithValue(error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n  }\n}); //Register actions\n\nexport const registerUserAction = createAsyncThunk(\"user/register\", async (payload, _ref2) => {\n  let {\n    rejectWithValue,\n    getState,\n    dispatch\n  } = _ref2;\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  };\n\n  try {\n    //htttp address\n    const {\n      data\n    } = await axios.post(`${baseURL}/users/register`, payload, config);\n    return data;\n  } catch (error) {\n    var _error$response2;\n\n    if (!(error !== null && error !== void 0 && error.response)) {\n      throw error;\n    }\n\n    return rejectWithValue(error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data);\n  }\n}); //slices\n// get user from local storage to store in our store\n\nconst userLoginFromStorage = localStorage.getItem(\"userInfo\") ? JSON.parse(localStorage.getItem(\"userInfo\")) : undefined;\nconst usersSlices = createSlice({\n  name: 'users',\n  initialState: {\n    auth: 'False',\n    users: [\"Bob\", \"Marley\"]\n  },\n  extraReducers: builder => {\n    // handle pending state for login action\n    builder.addCase(loginUserAction.pending, (state, action) => {\n      state.userLoading = true;\n      state.userAppErr = undefined;\n      state.userServerErr = undefined;\n    }); // handle success state\n\n    builder.addCase(loginUserAction.fulfilled, (state, action) => {\n      state.userAuth = action === null || action === void 0 ? void 0 : action.payload;\n      state.userLoading = false;\n      state.userAppErr = undefined;\n      state.userServerErr = undefined;\n    }); //handle rejected state\n\n    builder.addCase(loginUserAction.rejected, (state, action) => {\n      var _action$payload, _action$error;\n\n      state.userLoading = false;\n      state.userAppErr = action === null || action === void 0 ? void 0 : (_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.msg;\n      state.userServerError = action === null || action === void 0 ? void 0 : (_action$error = action.error) === null || _action$error === void 0 ? void 0 : _action$error.msg;\n    }); // handle pending state for register action\n\n    builder.addCase(registerUserAction.pending, (state, action) => {\n      state.userLoading = true;\n      state.userAppErr = undefined;\n      state.userServerErr = undefined;\n    }); // handle success state\n\n    builder.addCase(registerUserAction.fulfilled, (state, action) => {\n      state.userAuth = action === null || action === void 0 ? void 0 : action.payload;\n      state.userLoading = false;\n      state.userAppErr = undefined;\n      state.userServerErr = undefined;\n    }); //handle rejected state\n\n    builder.addCase(registerUserAction.rejected, (state, action) => {\n      var _action$payload2, _action$error2;\n\n      state.userLoading = false;\n      state.userAppErr = action === null || action === void 0 ? void 0 : (_action$payload2 = action.payload) === null || _action$payload2 === void 0 ? void 0 : _action$payload2.msg;\n      state.userServerError = action === null || action === void 0 ? void 0 : (_action$error2 = action.error) === null || _action$error2 === void 0 ? void 0 : _action$error2.msg;\n    });\n  }\n});\nexport default usersSlices.reducer;","map":{"version":3,"sources":["D:/VIC U/SWEN 504/Moneyger/client/src/redux/slices/users/usersSlices.js"],"names":["createAsyncThunk","createSlice","axios","baseURL","loginUserAction","payload","rejectWithValue","getState","dispatch","config","headers","data","post","localStorage","setItem","JSON","stringify","error","response","registerUserAction","userLoginFromStorage","getItem","parse","undefined","usersSlices","name","initialState","auth","users","extraReducers","builder","addCase","pending","state","action","userLoading","userAppErr","userServerErr","fulfilled","userAuth","rejected","msg","userServerError","reducer"],"mappings":"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","sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\nimport baseURL from \"../../../utils/baseURL\";\r\n\r\n\r\n//Login actions\r\n\r\nexport const loginUserAction = createAsyncThunk(\r\n  \"user/login\",\r\n  async (payload, { rejectWithValue, getState, dispatch }) => {\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n    try {\r\n      //htttp address\r\n      const { data } = await axios.post(\r\n        `${baseURL}/users/login`,\r\n        payload,\r\n        config\r\n      );\r\n\r\n      // save user into localstorage when logged in\r\n      localStorage.setItem(\"userInfo\", JSON.stringify(data));\r\n      return data;\r\n    } catch (error) {\r\n        if(!error?.response){\r\n            throw error;\r\n        }\r\n        return rejectWithValue(error?.response?.data);\r\n    }\r\n  }\r\n);\r\n\r\n//Register actions\r\n\r\nexport const registerUserAction = createAsyncThunk(\r\n  \"user/register\",\r\n  async (payload, { rejectWithValue, getState, dispatch }) => {\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n    try {\r\n      //htttp address\r\n      const { data } = await axios.post(\r\n        `${baseURL}/users/register`,\r\n        payload,\r\n        config\r\n      );\r\n      return data;\r\n    } catch (error) {\r\n        if(!error?.response){\r\n            throw error;\r\n        }\r\n        return rejectWithValue(error?.response?.data);\r\n    }\r\n  }\r\n);\r\n\r\n\r\n//slices\r\n// get user from local storage to store in our store\r\n\r\nconst userLoginFromStorage = localStorage.getItem(\"userInfo\") ? JSON.parse(localStorage.getItem(\"userInfo\")) : undefined\r\nconst usersSlices = createSlice({\r\n    name: 'users',\r\n    initialState:{auth: 'False', users:[\"Bob\", \"Marley\"]},\r\n    extraReducers: (builder)=>{\r\n        // handle pending state for login action\r\n        builder.addCase(loginUserAction.pending, (state, action) => {\r\n            state.userLoading = true;\r\n            state.userAppErr = undefined;\r\n            state.userServerErr = undefined;\r\n        });\r\n\r\n        // handle success state\r\n        builder.addCase(loginUserAction.fulfilled, (state,action) => {\r\n            state.userAuth = action?.payload;\r\n            state.userLoading = false;\r\n            state.userAppErr = undefined;\r\n            state.userServerErr = undefined;\r\n        });\r\n\r\n        //handle rejected state\r\n        builder.addCase(loginUserAction.rejected, (state, action) =>{\r\n            state.userLoading = false;\r\n            state.userAppErr = action?.payload?.msg;\r\n            state.userServerError = action?.error?.msg;\r\n        });\r\n\r\n         // handle pending state for register action\r\n         builder.addCase(registerUserAction.pending, (state, action) => {\r\n          state.userLoading = true;\r\n          state.userAppErr = undefined;\r\n          state.userServerErr = undefined;\r\n      });\r\n\r\n      // handle success state\r\n      builder.addCase(registerUserAction.fulfilled, (state,action) => {\r\n          state.userAuth = action?.payload;\r\n          state.userLoading = false;\r\n          state.userAppErr = undefined;\r\n          state.userServerErr = undefined;\r\n      });\r\n\r\n      //handle rejected state\r\n      builder.addCase(registerUserAction.rejected, (state, action) =>{\r\n          state.userLoading = false;\r\n          state.userAppErr = action?.payload?.msg;\r\n          state.userServerError = action?.error?.msg;\r\n      });\r\n     },\r\n});\r\n\r\nexport default usersSlices.reducer;"]},"metadata":{},"sourceType":"module"}